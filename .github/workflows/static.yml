# –®–ê–ì 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
      - name: Generate index.html with all gardens
        run: |
          echo "üåø –ù–∞—á–∏–Ω–∞—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∞–¥–æ–≤..."
          
          # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É —Å —Å–∞–¥–∞–º–∏
          cd src/site/notes/
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø–∞–ø–∫–∏
          if [ ! -d "$(ls -d */ 2>/dev/null | head -1)" ]; then
            echo "‚ùå –û—à–∏–±–∫–∞: –í –ø–∞–ø–∫–µ notes –Ω–µ—Ç –ø–æ–¥–ø–∞–ø–æ–∫!"
            exit 1
          fi
          
          # –°–æ–∑–¥–∞—ë–º index.html - –í–ê–ñ–ù–û: –Ω–∞—á–∏–Ω–∞–µ–º —Å –ø—Ä–æ—Å—Ç–µ–π—à–µ–≥–æ HTML
          cat > index.html << 'EOF'
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–∏ —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∞–¥—ã</title>
    <style>
        body { font-family: sans-serif; margin: 40px; }
        .garden { margin: 20px 0; padding: 15px; background: #f5f5f5; }
        a { color: #0366d6; text-decoration: none; }
    </style>
</head>
<body>
    <h1>üìö –ú–æ–∏ —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∞–¥—ã</h1>
    <div id="gardens-container">
        <!-- –°–∞–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–¥–µ—Å—å -->
    </div>
    <script>
        // –ü—Ä–æ—Å—Ç–æ–π JavaScript –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∞–¥–æ–≤
        const gardens = [
EOF
          
          # –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥—ã–π —Å–∞–¥ –≤ JavaScript –º–∞—Å—Å–∏–≤
          for dir in */; do
            dir_name="${dir%/}"
            dir_url="${dir// /%20}"
            echo "            {name: \"$dir_name\", url: \"$dir_url/\"}," >> index.html
          done
          
          # –ó–∞–≤–µ—Ä—à–∞–µ–º HTML –∏ JavaScript
          cat >> index.html << 'EOF'
        ];
        
        const container = document.getElementById('gardens-container');
        gardens.forEach(garden => {
            const div = document.createElement('div');
            div.className = 'garden';
            div.innerHTML = `
                <h3><a href="${garden.url}">üìÅ ${garden.name}</a></h3>
                <small>–ü—É—Ç—å: /${garden.url}</small>
            `;
            container.appendChild(div);
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫
        const counter = document.createElement('p');
        counter.innerHTML = `<strong>–í—Å–µ–≥–æ —Å–∞–¥–æ–≤: ${gardens.length}</strong>`;
        container.parentNode.insertBefore(counter, container);
        
        // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        const date = new Date().toLocaleDateString('ru-RU');
        document.body.innerHTML += `<footer><small>–û–±–Ω–æ–≤–ª–µ–Ω–æ: ${date}</small></footer>`;
    </script>
</body>
</html>
EOF
          
          echo "‚úÖ –°–æ–∑–¥–∞–Ω index.html —Å $(ls -d */ | wc -l) —Å–∞–¥–∞–º–∏"
