name: Deploy from src/site/notes

on:
  push:
    branches: [main]
  workflow_dispatch:

permissions:
  pages: write
  id-token: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤ –ø–∞–ø–∫–µ –µ—Å—Ç—å —Ñ–∞–π–ª—ã
      - name: Check source files
        run: |
          echo "üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ src/site/notes:"
          ls -la src/site/notes/
          echo ""
          echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:"
          echo "–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: $(find src/site/notes -type f | wc -l)"
          echo "HTML —Ñ–∞–π–ª–æ–≤: $(find src/site/notes -name "*.html" | wc -l)"
      
      # –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: —É–∫–∞–∑—ã–≤–∞–µ–º –ü–†–ê–í–ò–õ–¨–ù–£–Æ –ø–∞–ø–∫—É
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./src/site/notes  # ‚Üê –í–ê–ñ–ù–û! –ë–µ—Ä–µ–º –æ—Ç—Å—é–¥–∞
          keep_files: false
